<!DOCTYPE html> <html lang=" en "><head> <meta charset="utf-8" /> <title> 우테코 2차 과정 - 2. 레이싱 카 -다니 </title> <meta http-equip="X-UA-Compatible" content="IE=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1" /> <meta name="description" content="레이싱카 후기- 우테코 2차 과정 - 2. 레이싱 카"> <meta name="keywords" content="우테코 2차 과정 - 2. 레이싱 카, 다니, wua-techcourse,우아한 테크코스, 우형, 우아한 형제들, 배달의 민족, 백앤드, 자바, 2차, 후기, 우아한 테크코스 3기"/> <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml" /> <meta content="" property="fb:app_id" /> <meta content="다니" property="og:site_name" /> <meta content="우테코 2차 과정 - 2. 레이싱 카" property="og:title" /> <meta content="article" property="og:type" /> <meta content="레이싱카 후기" property="og:description" /> <meta content="https://qhals321.github.io/blog/wua-2-2/" property="og:url" /> <meta content="2021-01-10T11:26:23+00:00" property="article:published_time" /> <meta content="https://qhals321.github.io/about/" property="article:author" /> <meta content="https://qhals321.github.io/assets/img/posts/techcourse.jpg" property="og:image" /> <meta content="wua-techcourse" property="article:section" /> <!-- Twitter Cards --> <meta name="twitter:card" content="summary" /> <meta name="twitter:site" content="@" /> <meta name="twitter:creator" content="@" /> <meta name="twitter:title" content="우테코 2차 과정 - 2. 레이싱 카" /> <meta name="twitter:url" content="https://qhals321.github.io/blog/wua-2-2/" /> <meta name="twitter:description" content="레이싱카 후기" /> <link rel="stylesheet" href="https://qhals321.github.io/assets/css/main.css" /> <!-- <link rel="stylesheet" href="https://qhals321.github.io/assets/css/custom-style.css" /> --> <link rel="stylesheet" href="https://qhals321.github.io/assets/bower_components/lightgallery/dist/css/lightgallery.min.css" /> <link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.0.0-beta.3/default/snipcart.css" /> <link rel="stylesheet" href="https://qhals321.github.io/assets/bower_components/bootstrap/dist/css/bootstrap.min.css" /> <link rel="stylesheet" href="https://qhals321.github.io/assets/bower_components/font-awesome/web-fonts-with-css/css/fontawesome-all.min.css" /> <link rel="stylesheet" href="https://qhals321.github.io/assets/bower_components/icono/dist/icono.min.css" /> <!-- Fonts--> <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet" /> <!-- Favicon --> <link rel="icon" href="https://qhals321.github.io/assets/img/favicon.ico" type="image/gif" sizes="16x16" /> <script> var base_url = 'https://qhals321.github.io' ; </script> <!-- Jquery --> <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha384-vk5WoKIaW/vJyUAd9n/wmopsmNhiy+L2Z+SBxGYnUkunIxVxAv/UtMOhba/xskxh" crossorigin="anonymous" ></script> <!-- <script src="https://qhals321.github.io/assets/bower_components/jquery/dist/jquery.min.js"></script> --> <script src="https://qhals321.github.io/assets/bower_components/jquery.easing/jquery.easing.min.js"></script> <script src="https://qhals321.github.io/assets/bower_components/bootstrap/dist/js/bootstrap.bundle.min.js"></script> <script src="https://qhals321.github.io/assets/bower_components/jquery-mousewheel/jquery.mousewheel.min.js"></script> <script src="https://qhals321.github.io/assets/bower_components/ghosthunter/dist/jquery.ghostHunter.min.js"></script> <script src="https://qhals321.github.io/assets/bower_components/lightgallery/dist/js/lightgallery-all.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/picturefill/3.0.2/picturefill.min.js"></script> <script src="https://qhals321.github.io/assets/bower_components/imagesloaded/imagesloaded.pkgd.min.js"></script> <script src="https://qhals321.github.io/assets/bower_components/nanobar/nanobar.min.js"></script> <script src="https://qhals321.github.io/assets/bower_components/typewrite/dist/typewrite.min.js"></script> <script src="https://qhals321.github.io/assets/js/search.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script> <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script> <!-- for Mathjax support --> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "AMS" } } }); </script> <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> <!-- Github Button --> <script async defer src="https://buttons.github.io/buttons.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous" ></script> <!-- (you can remove the below scripts but do buy me a coffee to show some support :) --> <!-- Maker widget --> <!-- <script>--> <!-- (function(d, h, m) {--> <!-- var js,--> <!-- fjs = d.getElementsByTagName(h)[0];--> <!-- if (d.getElementById(m)) {--> <!-- return;--> <!-- }--> <!-- js = d.createElement(h);--> <!-- js.id = m;--> <!-- js.onload = function() {--> <!-- window.makerWidgetComInit({--> <!-- position: "left",--> <!-- widget: "ofeeof264otl2l5g-zspk40eq2gaomj2n-higi2qphmveubksi"--> <!-- });--> <!-- };--> <!-- js.src = "https://makerwidget.com/js/embed.js";--> <!-- fjs.parentNode.insertBefore(js, fjs);--> <!-- })(document, "script", "dhm");--> <!-- </script>--> <!-- buy me a coffeee --> <script data-name="BMC-Widget" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="sujaykundu" data-description="Support me on Buy me a coffee!" data-message="" data-color="#FF813F" data-position="right" data-x_margin="10" data-y_margin="10" ></script> <!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--> <!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]--> <!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]--> <!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]--> </head> <body> <nav class="navbar navbar-expand-lg fixed-top navbar-dark" id="topNav"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation" > <span class="icono-hamburger" id="navbar-hamburger"> </span> </button> <a class="navbar-brand" href="https://qhals321.github.io">다니</a> <div class="collapse navbar-collapse" id="navbarNav"> <ul class="navbar-nav"> <li class="nav-item"> <a class="nav-link" href="https://qhals321.github.io/" >Home</a > </li> <li class="nav-item"> <a class="nav-link" href="https://qhals321.github.io/about" >About</a > </li> <li class="nav-item"> <a class="nav-link" href="https://qhals321.github.io/blog" >Blog</a > </li> </ul> </div> <ul class="nav justify-content-end"> <!-- <li class="nav-item">--> <!-- <a class="nav-link toggle-search-button" href="#search">--> <!-- <i class="fa fa-search search-icon" aria-hidden="true"></i>--> <!-- </a>--> <!-- </li>--> <!-- <li class="nav-item" style="margin-top:5px; padding-right:20px;" >--> <!-- <a class="header__checkout snipcart-checkout">--> <!-- <svg width="31" height="27" viewBox="0 0 31 27" fill="none" xmlns="http://www.w3.org/2000/svg">--> <!-- <path--> <!-- d="M1.10512 0.368718C0.560256 0.368718 0.118164 0.812066 0.118164 1.35848C0.118164 1.9049 0.560256 2.34824 1.10512 2.34824H4.90887L8.30138 18.4009C8.43503 19.0053 8.83085 19.5079 9.32946 19.5041H25.7788C26.3005 19.5118 26.7799 19.0375 26.7799 18.5143C26.7799 17.9911 26.3006 17.5168 25.7788 17.5245H10.1315L9.71003 15.545H27.095C27.5371 15.5412 27.9547 15.2048 28.0511 14.7718L30.354 4.87412C30.4825 4.29933 29.9852 3.67172 29.3979 3.66786H7.21171L6.6771 1.15221C6.58329 0.71276 6.15921 0.368652 5.7107 0.368652L1.10512 0.368718ZM7.623 5.64746H12.7634L13.2569 8.61674H8.25005L7.623 5.64746ZM14.7785 5.64746H20.9881L20.4946 8.61674H15.2719L14.7785 5.64746ZM23.0031 5.64746H28.1537L27.4649 8.61674H22.5097L23.0031 5.64746ZM8.67181 10.5963H13.5862L14.0797 13.5656H9.29919L8.67181 10.5963ZM15.6009 10.5963H20.1656L19.6721 13.5656H16.0944L15.6009 10.5963ZM22.1807 10.5963H27.0023L26.3135 13.5656H21.6872L22.1807 10.5963ZM12.6197 20.164C10.8141 20.164 9.32979 21.6525 9.32979 23.4632C9.32979 25.2739 10.8141 26.7624 12.6197 26.7624C14.4252 26.7624 15.9095 25.2739 15.9095 23.4632C15.9095 21.6525 14.4252 20.164 12.6197 20.164ZM22.4892 20.164C20.6837 20.164 19.1994 21.6525 19.1994 23.4632C19.1994 25.2739 20.6837 26.7624 22.4892 26.7624C24.2948 26.7624 25.7791 25.2739 25.7791 23.4632C25.7791 21.6525 24.2948 20.164 22.4892 20.164ZM12.6197 22.1435C13.3586 22.1435 13.9356 22.7222 13.9356 23.4632C13.9356 24.2042 13.3586 24.7829 12.6197 24.7829C11.8807 24.7829 11.3037 24.2042 11.3037 23.4632C11.3037 22.7222 11.8807 22.1435 12.6197 22.1435ZM22.4892 22.1435C23.2282 22.1435 23.8052 22.7222 23.8052 23.4632C23.8052 24.2042 23.2282 24.7829 22.4892 24.7829C21.7503 24.7829 21.1733 24.2042 21.1733 23.4632C21.1733 22.7222 21.7503 22.1435 22.4892 22.1435Z"--> <!-- fill="#ff7901" class="header__checkout-fill"></path>--> <!-- </svg>--> <!-- <span class="snipcart-items-count"></span>--> <!-- &lt;!&ndash; <span class="snipcart-total-price"></span> &ndash;&gt;--> <!-- </a>--> <!-- </li>--> <li class="nav-item"> <input class="nav-link switch" id="theme-toggle" onclick="modeSwitcher() " type="checkbox" name="checkbox" /> </li> </ul> </nav> <!-- Search Form --> <div class="search-form-container"> <form class="search-form"> <fieldset class="search-form__fieldset"> <div class="row"> <div class="col-lg-8 offset-md-2"> <input class="search-form__field" placeholder="Type to Search..." autofocus> <input class="search-form__submit" type="submit" value="search"> </div> </div> </fieldset> </form> <div class="row"> <div class="col-lg-8 offset-md-2 search-results"> <div class="card search-results"></div> </div> </div> <div class="close-search-button search-form-container__close"> <i class="fa fa-times icon"></i> </div> </div><div class="col-lg-12"> <div class="row" id="blog-post-container"> <div class="col-lg-8 offset-md-2"><article class="card" itemscope itemtype="http://schema.org/BlogPosting"> <div class="card-header"> <h1 class="post-title" itemprop="name headline">우테코 2차 과정 - 2. 레이싱 카</h1> <h4 class="post-meta">레이싱카 후기</h4> <p class="post-summary"> Posted by : <span itemprop="author" itemscope itemtype="http://schema.org/Person"> <span itemprop="name"><a href="https://qhals321.github.io/blog/authors/Dani">Dani</a></span> </span > at <time datetime="2021-01-10 11:26:23 +0000" itemprop="datePublished" >Jan 10, 2021</time > </p> <span class="disqus-comment-count" data-disqus-identifier="/blog/wua-2-2/" ></span> <div class="post-categories"> Category : <a href="/blog/categories/wua-techcourse" >wua-techcourse</a > </div> </div> <div class="card-body" itemprop="articleBody"> <img class="card-img-top" src="https://qhals321.github.io/assets/img/posts/techcourse.jpg" alt="" /> <br /> <br /> <h2 id="우테코-프리코스-2차">우테코 프리코스 2차</h2> <p>2차가 드디어 시작되었다. 수요일에 바로 올 줄 알았는데 수요일 오후 3 시쯔음 과제가 주어졌다. 수요일 과제를 기다리다 과제가 오지 않아서 괜히 내가 전 과제에서 무언가 실수했나? 생각에 괜히 마음이 불안했다. 어찌됐든! 이번 주제는 자동차 경주 게임이었다.</p> <p><img src="/assets/img/posts/wuatechcourse/racingcar/Untitled.png" height="100%" width="100%" /></p> <p>이번 기능 요구사항이었다.</p> <p>그리고 프로그래밍 요구사항은 다음과 같았다.</p> <p><img src="/assets/img/posts/wuatechcourse/racingcar/Untitled1.png" height="100%" width="100%" /></p> <p>확실히 클린코드를 향해 달려 나가는 과제인 것 같다.</p> <p>구현할 기능부터 일단 적었다.</p> <p><img src="/assets/img/posts/wuatechcourse/racingcar/Untitled2.png" height="100%" width="100%" /></p> <p>이번 과제에서는 생겼던 이슈가 많았다.</p> <ul> <li><strong>어떻게 랜덤 값으로 전진하는 차를 테스트할까?</strong></li> <li><strong>레이스 현 상황 출력과 서비스 로직을 어떻게 분리할까?</strong></li> <li><strong>컬렉션이 많으니 코드가 많이 지저분해 보인다. 어떻게 개선할까?</strong></li> </ul> <h3 id="어떻게-랜덤-값으로-전진하는-차를-테스트할까">어떻게 랜덤 값으로 전진하는 차를 테스트할까?</h3> <p>레이스 클래스를 테스트하고 싶었지만 랜덤 방식으로 돌아가는 코드를 테스트하기에 불가능해 보였다. 최근에 공부하고 있는 디자인 패턴을 사용해 보았다.</p> <p>맨 처음은 <strong>template method pattern</strong>을 사용해 보았다.</p> <p>해결 시도 1. <strong>template method pattern</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">Race</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Car</span><span class="o">&gt;</span> <span class="n">cars</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">round</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Race</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Car</span><span class="o">&gt;</span> <span class="n">cars</span><span class="o">,</span> <span class="kt">int</span> <span class="n">round</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">cars</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;(</span><span class="n">cars</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">round</span> <span class="o">=</span> <span class="n">round</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">start</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">round</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">makeCarRun</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="nc">RaceResult</span><span class="o">.</span><span class="na">getResult</span><span class="o">(</span><span class="n">cars</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">protected</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">makeCarRun</span><span class="o">();</span>   <span class="c1">//달리는 방식은 자식 객체에서 정한다.</span>

<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RandomRace</span> <span class="kd">extends</span> <span class="nc">Race</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">MIN_RANDOM_DIGIT</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">MAX_RANDOM_DIGIT</span> <span class="o">=</span> <span class="mi">9</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">RandomRace</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Car</span><span class="o">&gt;</span> <span class="n">cars</span><span class="o">,</span> <span class="kt">int</span> <span class="n">round</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">cars</span><span class="o">,</span> <span class="n">round</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">makeCarRun</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">cars</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">car</span> <span class="o">-&gt;</span> <span class="n">car</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">randomly</span><span class="o">()));</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="nf">randomly</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">RandomUtils</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="no">MIN_RANDOM_DIGIT</span><span class="o">,</span> <span class="no">MAX_RANDOM_DIGIT</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>템플릿 메서드 패턴으로 하게 되면 문제점이 있다. cars에 접근하기 위해 cars를 protected로 변환 시켰다. 이 의미는 자식 객체에서 컬렉션에 접근이 가능하다는 것이다. (불변성 유지가 힘들어 보임) 따라서 템플릿 메서드 패턴은 포기했다.</p> <p>해결 시도 2. <strong>Strategy pattern</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Race</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Car</span><span class="o">&gt;</span> <span class="n">cars</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">round</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Race</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Car</span><span class="o">&gt;</span> <span class="n">cars</span><span class="o">,</span> <span class="kt">int</span> <span class="n">round</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">cars</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;(</span><span class="n">cars</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">round</span> <span class="o">=</span> <span class="n">round</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">start</span><span class="o">(</span><span class="nc">DigitStrategy</span> <span class="n">digitStrategy</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">round</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">makeCarRun</span><span class="o">(</span><span class="n">digitStrategy</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="nc">RaceResult</span><span class="o">.</span><span class="na">getResult</span><span class="o">(</span><span class="n">cars</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">makeCarRun</span><span class="o">(</span><span class="nc">DigitStrategy</span> <span class="n">digitStrategy</span><span class="o">){</span>
        <span class="n">cars</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">car</span> <span class="o">-&gt;</span> <span class="n">car</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">digitStrategy</span><span class="o">.</span><span class="na">getDigit</span><span class="o">()));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>Strategy 부분 :</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">DigitStrategy</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="nf">getDigit</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">InputDigit</span> <span class="kd">implements</span> <span class="nc">DigitStrategy</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">inputNumber</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">InputDigit</span><span class="o">(</span><span class="kt">int</span> <span class="n">inputNumber</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">inputNumber</span> <span class="o">=</span> <span class="n">inputNumber</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getDigit</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">inputNumber</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RandomDigit</span> <span class="kd">implements</span> <span class="nc">DigitStrategy</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">MIN_RANDOM_DIGIT</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">MAX_RANDOM_DIGIT</span> <span class="o">=</span> <span class="mi">9</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getDigit</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">RandomUtils</span><span class="o">.</span><span class="na">nextInt</span><span class="o">(</span><span class="no">MIN_RANDOM_DIGIT</span><span class="o">,</span> <span class="no">MAX_RANDOM_DIGIT</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>만일 테스트를 하고 싶다면 매개변수로 InputDigit을 넣으면 확인이 가능했고 실제 서비스는 랜덤방식인 RandomDigit을 넣어 사용하면 된다.</p> <h3 id="레이스-현-상황-출력과-서비스-로직을-어떻게-분리할까"><strong>레이스 현 상황 출력과 서비스 로직을 어떻게 분리할까?</strong></h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pobi</span> <span class="o">:</span> <span class="o">--</span>
<span class="n">woni</span> <span class="o">:</span> <span class="o">----</span>
<span class="n">jun</span> <span class="o">:</span> <span class="o">---</span>
</code></pre></div></div> <p>각 차수별(매 Round) 위와 같이 화면에 현 위치를 그래프 형식으로 표시해야 했다. 서비스 로직은 다음과 같았다.</p> <ol> <li>매 차수별 모든 참여한 차에게 랜덤한 값을 부여</li> <li>매 차수별 현 위치 출력</li> </ol> <p>서비스 로직에 출력이 있는 것이 마음에 들지 않았다. 어떻게 출력을 분리할 수 있을까? 결론은 로그를 저장해서 경기가 끝나면 모든 로그를 화면에 출력하는 방식으로 진행했다.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RaceLog</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">ENTER</span> <span class="o">=</span> <span class="s">"\n"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">LOG_FORM</span> <span class="o">=</span> <span class="s">"%s : %s"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">GRAPH</span> <span class="o">=</span> <span class="s">"-"</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">StringBuilder</span> <span class="n">log</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nf">RaceLog</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">log</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">RaceLog</span> <span class="nf">newInstance</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">RaceLog</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">writeLog</span><span class="o">(</span><span class="nc">Participants</span> <span class="n">participants</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">participants</span><span class="o">.</span><span class="na">getParticipants</span><span class="o">()</span>
                <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="k">this</span><span class="o">::</span><span class="n">logCurrentPosition</span><span class="o">);</span>
        <span class="n">log</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="no">ENTER</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">logCurrentPosition</span><span class="o">(</span><span class="nc">Car</span> <span class="n">car</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">car</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">currentPosition</span> <span class="o">=</span> <span class="n">car</span><span class="o">.</span><span class="na">getCurrentPosition</span><span class="o">();</span>
        <span class="nc">String</span> <span class="n">graph</span> <span class="o">=</span> <span class="n">mapToGraph</span><span class="o">(</span><span class="n">currentPosition</span><span class="o">);</span>
        <span class="n">log</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="no">LOG_FORM</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">graph</span><span class="o">));</span>
        <span class="n">log</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="no">ENTER</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="nf">mapToGraph</span><span class="o">(</span><span class="kt">int</span> <span class="n">currentPosition</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">StringBuilder</span> <span class="n">graph</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">currentPosition</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">graph</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="no">GRAPH</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">graph</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getLog</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">log</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>로그는 계속해서 concat이 이뤄져야 한다. String으로 계속 concat을 하게 되면 새로운 객체가 계속 생겨 효율이 좋지 않아서 StringBuilder 클래스를 사용했다.</p> <h3 id="컬렉션이-많으니-코드가-많이-지저분해-보인다-어떻게-개선할까"><strong>컬렉션이 많으니 코드가 많이 지저분해 보인다. 어떻게 개선할까?</strong></h3> <p>List<Car> 또는 List<String> 클래스가 너무 많았다. 리팩토링을 하기 위해 코드를 다시 읽어보면 무언가 눈에 확 와 닿지 않았다. 이 코드를 어떻게 개선을 해야 할까?</String></Car></p> <p>이러한 클래스들을 다시 한 번 추상화를 해줬다. List<Car>같은 경우는 참여자이니 Participants로 한 번 감싸줬고 우승자의 이름을 담고 있는 List<String>은 Winners라는 클래스로 한 번 감싸줬다. 이렇게 하니 확실히 읽기도 편했고 컬렉션의 불변성을 유지하는 데에도 많이 편해졌다.</String></Car></p> <hr /> <h2 id="배운-점">배운 점</h2> <p>이번 과제에서 배운 점이 굉장히 많았다. 어떻게 보면 나의 코딩의 기준을 하나씩 세워 나갔던 과제이었다.</p> <ol> <li>디자인 패턴의 중요성을 배웠다.</li> <li>가독성이 좋게 하기 위해 Wrapping을 사용하자. (컬렉션이 보인다면 추상화가 가능한 지 바로 고민해보자)</li> <li>입력과 출력을 어떻게 나눠야할 지 감이 잡혔다.</li> <li>2 번과 비슷하지만 모든 객체지향의 시작은 추상화부터 시작이 되는 것 같다.</li> </ol> <br /><!-- Load Facebook SDK for JavaScript --> <div id="fb-root"></div> <script> (function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0"; fjs.parentNode.insertBefore(js, fjs); })(document, "script", "facebook-jssdk"); </script> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8" ></script> <div class="share-page"> <p class="share-text">Share this on &rarr;</p> <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-size="large" data-show-count="false" style="margin-top:5px;" >Tweet</a > <a class="fb-share-button" data-href="https://qhals321.github.io/blog/wua-2-2/" data-size="large" data-layout="button" >Share</a> </div><!-- Author box --> <div class="card"> <div class="card-header"> About Dani </div> <div class="card-body"> <div class="row"> <div class="col-md-4"> <img class="author-profile-img" src="https://qhals321.github.io/assets/img/authors/Dani.png" alt="Dani" /> </div> <div class="col-md-6"> <p class="author_bio">많은 것을 배우고 싶은 사람</p> <p>Email : bomdani9302@gmail.com</p> <p>Website : https://qhals321.github.io</p> <p class="profile-links"> <a class="social-link" href="https://github.com/qhals321" target="_blank"><i class="fab fa-github fa-fw"></i></a> </p> </div> </div> </div> </div> </div><!-- Incomment incase you want to use Disqus <div id="disqus_thread"></div> --> </article> <script> var disqus_config = function () { this.page.url = "https://qhals321.github.io/blog/wua-2-2/"; /* Replace PAGE_URL with your page's canonical URL variable */ this.page.identifier = "/blog/프리코스-2차-레이싱카"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */ }; (function () { /* DON'T EDIT BELOW THIS LINE */ var d = document, s = d.createElement('script'); s.src = 'https://.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a> </noscript></div> </div> <div class="row"> <div class="col-md-4"> <div class="card"> <div class="card-header">About 다니</div> <div class="card-body"> <p class="author_bio">많은 것을 배우고 나누고싶은 사람</p><!-- Place this tag where you want the github button to render. --> <!--<a class="github-button" href="https://github.com/qhals321" data-color-scheme="no-preference: dark; light: dark; dark: dark;" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star sujaykundu777/devlopr-jekyll on GitHub">Star</a>--> </div> </div> </div> <div class="col-md-4"> <div class="card"> <div class="card-header">Categories</div> <div class="card-body text-dark"> <div id="#wua-techcourse"></div> <li class="tag-head"> <a href="/blog/categories/wua-techcourse">wua-techcourse</a> </li> <a name="wua-techcourse"></a> <div id="#java-basic"></div> <li class="tag-head"> <a href="/blog/categories/java-basic">java-basic</a> </li> <a name="java-basic"></a> <div id="#programming-etc"></div> <li class="tag-head"> <a href="/blog/categories/programming-etc">programming-etc</a> </li> <a name="programming-etc"></a> <div id="#book-review"></div> <li class="tag-head"> <a href="/blog/categories/book-review">book-review</a> </li> <a name="book-review"></a> <div id="#http"></div> <li class="tag-head"> <a href="/blog/categories/http">http</a> </li> <a name="http"></a> </div> </div> </div> <div class="col-md-4"> <div class="card"> <div class="card-header">Useful Links</div> <div class="card-body text-dark"> <li> <a href="https://qhals321.github.io/">Home</a> </li> <li> <a href="https://qhals321.github.io/about">About</a> </li> <li> <a href="https://qhals321.github.io/blog">Blog</a> </li> </div> </div> </div> </div> </div> <div class="col-lg-12" id="newsletter_footer"><!-- Mailchimp Newletters --> <!--<form action=""method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>--> <!--<div id="mc_embed_signup_scroll_footer">--> <!-- <label for="mce-EMAIL_footer"> Signup for Weekly Email Newsletters :D</label>--> <!-- <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL_footer" placeholder="email address" required>--> <!-- &lt;!&ndash; real people should not fill this in and expect good things - do not remove this or risk form bot signups&ndash;&gt;--> <!-- <div style="position: absolute; left: -5000px;" aria-hidden="true">--> <!-- <input type="text" name="b_50bab1c85eae24ecfb0f68361_3a2dd721d0" tabindex="-1" value="">--> <!-- </div><br />--> <!-- <div class="clear">--> <!-- <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe_footer" class="btn btn-lg btn-success">--> <!-- </div>--> <!--</div>--> </div><footer> <p> Powered by<a href="https://github.com/sujaykundu777/devlopr-jekyll"> devlopr jekyll</a>.Hosted at <a href="https://pages.github.com">Github</a>. Subscribe via <a href=" /feed.xml ">RSS</a> </p> </footer> <script> var options = { classname: 'my-class', id: 'my-id' }; var nanobar = new Nanobar( options ); nanobar.go( 30 ); nanobar.go( 76 ); nanobar.go(100); </script> <div hidden id="snipcart" data-api-key="Y2I1NTAyNWYtMTNkMy00ODg0LWE4NDItNTZhYzUxNzJkZTI5NjM3MDI4NTUzNzYyMjQ4NzU0"></div> <script src="https://cdn.snipcart.com/themes/v3.0.0-beta.3/default/snipcart.js" defer></script> <script src="https://qhals321.github.io/assets/js/mode-switcher.js"></script> <script> if (window.netlifyIdentity) { window.netlifyIdentity.on("init", user => { if (!user) { window.netlifyIdentity.on("login", () => { document.location.href = "/admin/"; }); } }); } </script> </body> </html>
